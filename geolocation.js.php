
var iplocation_url = 'https://www.localizaip.com.br/api/iplocation.php';
function LocalizarIP(){"undefined"!=typeof LIP_LowPrecision&&LIP_LowPrecision?use_LIP_DB():navigator.geolocation?(setTimeout("HTML5geoIPError(1);",LIP_timeout),navigator.geolocation.getCurrentPosition(function(t){HTML5geoIPFound(t.coords.latitude,t.coords.longitude,t.coords.accuracy)},function(t){HTML5geoIPError(t)},{enableHighAccuracy:!1,timeout:LIP_timeout-1e3,maximumAge:36e5})):use_LIP_DB()}function HTML5geoIPFound(mylat,mylng,accuracy){mylat=Math.round(1e6*mylat)/1e6,mylng=Math.round(1e6*mylng)/1e6,accuracy=Math.round(accuracy),ip_data.latitude=mylat,ip_data.longitude=mylng;var xhttp=new XMLHttpRequest;xhttp.open("GET","https://maps.googleapis.com/maps/api/geocode/json?latlng="+mylat+","+mylng+"&sensor=false",!0),xhttp.onreadystatechange=function(){if(4==xhttp.readyState&&200==xhttp.status){var city,state,countryCode,countryName;for(textResult=xhttp.responseText,eval("data=("+textResult+")"),i=0;i<data.results.length;i++)for(result=data.results[i],j=0;j<result.address_components.length;j++)address_comp=result.address_components[j],"locality,political"==address_comp.types&&(city=address_comp.long_name),"administrative_area_level_1,political"==address_comp.types&&(state=address_comp.short_name),"country,political"==address_comp.types&&(countryCode=address_comp.short_name,countryName=address_comp.long_name);ip_data.errorCode=0,ip_data.errorMsg="",ip_data.city=city,ip_data.state=state,ip_data.country=countryName,ip_data.countryCode=countryCode,ip_data.src="HTML5";var xh0=new XMLHttpRequest;xh0.open("GET",iplocation_url,!0),xh0.onreadystatechange=function(){if(4==xhttp.readyState&&200==xhttp.status){if(textResult=xh0.responseText,!textResult)return;ip_data_tmp=new Array,eval("ip_data_tmp=("+textResult+")"),ip_data.ip=ip_data_tmp.ip,ip_data.provider=ip_data_tmp.provider,ip_data.reverseDNS=ip_data_tmp.reverseDNS,LIP_done||"function"!=typeof LocalizaIP_done||(LIP_done=!0,LocalizaIP_done(ip_data))}},xh0.send();var xh1=new XMLHttpRequest;xh1.open("GET","https://www.localizaip.com.br/databank/ipinfo.php?ip=this&city="+city+"&state="+state+"&country="+countryCode+"&lat="+mylat+"&lng="+mylng+"&accu="+accuracy,!0),xh1.send()}},xhttp.send()}function use_LIP_DB(){if(!LIP_done){var xh=new XMLHttpRequest;xh.open("GET",iplocation_url,!0),xh.onreadystatechange=function(){4==xh.readyState&&200==xh.status&&(textResult=xh.responseText,eval("ip_data=("+textResult+")"),LIP_done||"function"!=typeof LocalizaIP_done||(LIP_done=!0,LocalizaIP_done(ip_data)))},xh.send()}}function HTML5geoIPError(t){use_LIP_DB()}var ip_data=new Array;"undefined"==typeof LIP_done&&(LIP_done=!1),"undefined"==typeof LIP_timeout&&(LIP_timeout=1e4),LIP_timeout<2e3&&(LIP_timeout=2e3),"undefined"==typeof LocalizaIP_done&&(LocalizaIP_done=LocalizaIP_success),LocalizarIP();
